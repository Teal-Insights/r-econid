% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/standardize_entity.R
\name{standardize_entity}
\alias{standardize_entity}
\title{Standardize Entity Identifiers}
\usage{
standardize_entity(
  data,
  target_cols,
  output_cols = c("entity_id", "entity_name", "entity_type"),
  prefix = NULL,
  default_entity_type = NA_character_,
  warn_ambiguous = TRUE,
  overwrite = TRUE,
  warn_overwrite = TRUE
)
}
\arguments{
\item{data}{A data frame or tibble containing entity identifiers to
standardize}

\item{target_cols}{Character vector or vector of symbols specifying the
columns containing identifiers (names, codes, abbreviations, etc.) for a
single entity to be standardized. (To standardize another entity, just
call the function again on the same data frame with the next entity's
identifier columns.) The function will try to match each column in
sequence, prioritizing matches from earlier columns.}

\item{output_cols}{Character vector specifying desired output columns.
Options are "entity_id", "entity_name", "entity_type", "iso3c", "iso2c".
Defaults to c("entity_id", "entity_name", "entity_type").}

\item{prefix}{Optional character string to prefix the output column names.
Useful when standardizing multiple entities in the same dataset (e.g.,
"country", "counterpart"). If provided, output columns will be named
prefix_entity_id, prefix_entity_name, etc. (with an underscore
automatically inserted between the prefix and the column name).}

\item{default_entity_type}{Character; the default entity type to use for
entities that do not match any of the patterns. Options are "economy",
"organization", "aggregate", or "other". If this argument is not supplied,
the default value will be NA_character_. Argument will be ignored if
output_cols do not include "entity_type".}

\item{warn_ambiguous}{Logical; whether to warn about ambiguous matches}

\item{overwrite}{Logical; whether to overwrite existing entity_* columns}

\item{warn_overwrite}{Logical; whether to warn when overwriting existing
entity_* columns. Defaults to TRUE.}
}
\value{
A data frame with standardized entity information merged with the
input data. The standardized columns are placed directly to the left of the
first target column.
}
\description{
Standardizes entity identifiers (e.g., name, ISO code) in an economic data
frame by matching them against a predefined list of regex patterns to add
columns containing standardized identifiers to the data frame.
}
\examples{
# Standardize a single entity
df <- data.frame(country_name = c("United States", "China"))
standardize_entity(df, target_cols = country_name)

# Standardize with multiple identifier columns
df <- data.frame(
  country_name = c("United States", "China", "Unknown"),
  country_code = c("USA", "CHN", "UNK")
)
standardize_entity(df, target_cols = c(country_name, country_code))

# Standardize multiple entities in sequence with a prefix
df <- data.frame(
  country_name = c("United States", "France"),
  counterpart_name = c("China", "Germany")
)
df |>
  standardize_entity(
    target_cols = country_name
  ) |>
  standardize_entity(
    target_cols = counterpart_name,
    prefix = "counterpart"
  )

}
